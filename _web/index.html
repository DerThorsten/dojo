<html>
<head>
  <script type="text/javascript" src='lib/zlib.min.js'></script>
  <script type="text/javascript" src='lib/jquery-1.10.2.min.js'></script>
  <script type='text/javascript' src='lib/openseadragon/openseadragon.js'></script>

  <script type="text/javascript">
    
    var SEQUENCE_URL_PREFIX = 'http://localhost:1337/segmentation/';

    window.onload = function() {

      function pad(i,n) {
        var v = i + "";
        while (v.length < n) {
          v = "0" + v
        }
        return v;
      }


      Colormap = [];

      $.ajax({url:'http://localhost:1337/segmentation/colormap'}).done( function(e) {

        Colormap = JSON.parse(e);

        var tileSources = [];
        for(var i=0; i<20; i++) {
          tileSources.push(SEQUENCE_URL_PREFIX+pad(i,8)+'/');
        }

        viewer = OpenSeadragon({id: "sd1",
          prefixUrl: '/dojo/lib/openseadragon/images/',
          blendTime: 0,
          showNavigator: false,
          maxZoomPixelRatio: 4,  
          zCacheSize: 1,
          preserveViewport: true,
          tileSources: tileSources,
          compressedRawData: true
        });

      });





    window.onkeypress = function(e) {
      if (e.charCode == 113) {

        viewer.goToPage(viewer.currentPage()+1);

      } else if (e.charCode == 97) {

        viewer.goToPage(viewer.currentPage()-1);

      }
    }


    };

  </script>

</head>

<body style='margin:0px'>
<div id='sd1' style='width:100%;height:100%;background-color:black'></div>
</body>

</html>
