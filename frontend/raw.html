<html>
<head>
  <script type='text/javascript' src='lib/openseadragon/openseadragon.js'></script>
  <script type="text/javascript" src='zlib.min.js'></script>
  <script type="text/javascript" src='//code.jquery.com/jquery-1.10.2.min.js'></script>
  <script type="text/javascript">
    
    var SEQUENCE_URL_PREFIX = 'http://localhost:1337/segmentation/';

    window.onload = function() {

      function pad(i,n) {
        var v = i + "";
        while (v.length < n) {
          v = "0" + v
        }
        return v;
      }


      // var tileSources = [];
      // for(var i=0; i<20; i++) {
      //   tileSources.push(SEQUENCE_URL_PREFIX+pad(i,8)+'/');
      // }

      // raw = [];
      // for (x in tileSources) {
      //   t = tileSources[x];
      //   console.log('grabbing', x)
      //   $.ajax({url:t}).done(function(x,res) {
      //     raw[x] = res;
      //   }.bind(this,x))
      // }

      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'http://localhost:1337/segmentation/00000000/10/0_0.png', true);
      xhr.responseType = 'arraybuffer';

      xhr.onload = function(e) {
        uInt8Array = new Uint8Array(this.response); // this.response == uInt8Array.buffer
        
        var inflate = new Zlib.Inflate(uInt8Array);
        _data = inflate.decompress();

    //deflate = new Zlib.RawDeflate(uInt8Array);

        
      };

      xhr.send();


      //new Zlib.Gunzip(new Uint8Array(_data))

    };

  </script>

</head>

<body style='margin:0px'>
<div id='sd1' style='width:100%;height:100%;background-color:black'></div>
</body>

</html>
